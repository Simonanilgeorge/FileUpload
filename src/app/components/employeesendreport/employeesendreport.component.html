<div class="container">
  <app-navbar></app-navbar>


    <app-toast [message]="message" [classBoolean]="toast"></app-toast>
    <div class="modal" [class.display]="modalBoolean" #modalRef>

      <div class="modal-content">
          <div class="text">
              <h2>Confirm Delete</h2>
          </div>
          <div class="text">
              <p>Are you sure you want to delete <span *ngIf="dataToBeDeleted">
                      {{dataToBeDeleted.inputs.orderNumber}}</span>?</p>
  
  
          </div>
  
          <div class="buttoncontainer">
              <button class="openbtn" (click)="deleteStatus()">Yes</button>
              <button class="openbtn" (click)="closeModal()">No</button>
          </div>
      </div>
  </div>

    <div class="cardcontainer">
      <div class="card">
        <form [formGroup]="userForm" >
          <div class="inputgroup">
            <h2 *ngIf="!update && !delete">Enter Production Data</h2>
            <h2 *ngIf="update">Edit Production Data</h2>
            <h2 *ngIf="delete">Delete Production Data</h2>
          </div>
          <div class="formcontainer-primary" formGroupName="inputs">
            <div class="inputgroup">
              <label for="date">Date</label>
              <input type="date" name="date" class="input-primary" formControlName="date">
            </div>
            <div class="inputgroup">
              <label for="orderNumber">Order Number</label>
              <input name="orderNumber" class="input-primary" formControlName="orderNumber" autocomplete="off">
            </div>
            <div class="inputgroup">
              <label for="client">Client</label>
              <select name="client" class="input-primary" formControlName="Client" (change)="changeClientOptions($event)">
                <option value="" [disabled]="true">--Select--</option>
                <option *ngFor="let client of ClientList" value="{{client}}">
                  {{client}}
                </option>
              </select>
            </div>
            <div class="inputgroup">
              <label for="task">Task</label>
              <select name="task" class="input-primary" formControlName="Task" (change)="changeTaskOptions($event)">
                <option value="" [disabled]="true">--Select--</option>
                <option *ngFor="let task of Tasklist" value="{{task}}">
                  {{task}}
                </option>
              </select>
            </div>
            <div class="inputgroup">
              <label for="process">Process</label>
              <select name="process" class="input-primary" formControlName="Process">
                <option value="" [disabled]="true">--Select--</option>
                <option *ngFor="let process of Processlist" value="{{process}}">
                  {{process}}
                </option>
              </select>
            </div>
            <div class="inputgroup">
              <label for="state">State</label>
              <ul>
                <li class="parent" (click)=display() [class.taskupdate]="delete">
                  <div class="dropdown-icon">
                    <p>{{state.value}} </p>
                    <p style="transform: rotate(90deg); font-size: 0.8rem;">&#x276F;</p>
                  </div>
                  <ul class="dropdown" [class.display]="displayBoolean">
                    <li *ngFor="let data of stateList" (click)="getName(data)">{{data}}</li>
                  </ul>
                </li>
              </ul>
            </div>
            <div class="inputgroup">
              <label for="start_time">Start Time</label>
              <input type="time" name="start_time" class="input-primary" formControlName="startTime">
            </div>
            <div class="inputgroup">
              <label for="end_time">End Time</label>
              <input type="time" name="end_time" class="input-primary" formControlName="endTime">
            </div>
            <div class="inputgroup">
              <label for="status">Status</label>

              <select name="status" class="input-primary" formControlName="status">

                <option value="" [disabled]="true">--Select--</option>
                <option *ngFor="let status of statusList">
                  {{status}}
                </option>
              </select>
            </div>
          </div>
          <div class="minicontainer">
            <div class="inputgroup" style="justify-items: center;padding:0.2em" *ngIf="delete||update">
              <button class="button" type="submit" (click)="goBack()">Cancel</button>
            </div>
            <div class="inputgroup" style="padding:0.2em" *ngIf="!delete">
              <button class="button" (click)="onSubmit()">Submit</button>
            </div>
            <div class="inputgroup" style="padding:0.2em" *ngIf="delete">
              <button class="button" (click)="showModal()">Delete</button>
            </div>
          </div>
        </form>
      </div>
    </div>


  </div>